import { Meta, Story, Preview } from "@storybook/addon-docs/blocks";
import * as PublishingStatus from "./publishing-status";

<Meta title="Church Center|Publishing Status" />

# PublishingStatus.

> Shared React and Reach components for building accessible Publishing Status dropdowns

<Preview>
  <Story name="*DRAFT TEST: Full">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Full, not org admin">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={false}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: enabled, published, app-only">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={false}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={false}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: enabled, published, app-only, org-admin">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Enabled but nothing published (org admin)">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Enabled but nothing published">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={false}
      userIsOrgAdmin={false}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: All systems fail (org admin)">
    <PublishingStatus.ViewController
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: All systems fail">
    <PublishingStatus.ViewController
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>
