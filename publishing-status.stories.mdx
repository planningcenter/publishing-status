import { Meta, Story, Preview } from "@storybook/addon-docs/blocks";
import * as PublishingStatus from "./publishing-status";
import "../../planningcenter/reach/css/menu-button.css";
// import * as Reach "@reach/menu-button";

<Meta title="Church Center|Publishing Status" />

# PublishingStatus.

> Shared React and Reach components for building accessible Publishing Status dropdowns

## Primary views

<Preview>
  <Story name="All systems go">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <PublishingStatus.MenuButton />
      <PublishingStatus.MenuItems>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
          <hr />
          <MenuLinks>
            <PublishingStatus.SettingsLink />
            <PublishingStatus.ProductLink />
          </MenuLinks>
        </PublishingStatus.ErrorBoundary>
      </PublishingStatus.MenuItems>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="Web only">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={false}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <PublishingStatus.MenuButton />
      <PublishingStatus.MenuItems>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
          <PublishingStatus.MenuLinks>
            <hr />
            <PublishingStatus.SettingsLink />
            <PublishingStatus.ProductLink />
          </PublishingStatus.MenuLinks>
        </PublishingStatus.ErrorBoundary>
      </PublishingStatus.MenuItems>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="App only">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <PublishingStatus.MenuButton />
      <PublishingStatus.MenuItems>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
          <PublishingStatus.MenuLinks>
            <hr />
            <PublishingStatus.SettingsLink />
            <PublishingStatus.ProductLink />
          </PublishingStatus.MenuLinks>
        </PublishingStatus.ErrorBoundary>
      </PublishingStatus.MenuItems>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="Church Center not enabled">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={false}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <PublishingStatus.MenuButton />
      <PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewSwitch />
        <PublishingStatus.MenuLinks>
          <hr />
          <PublishingStatus.SettingsLink />
          <PublishingStatus.ProductLink />
        </PublishingStatus.MenuLinks>
      </PublishingStatus.ErrorBoundary>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="Product not published">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={false}
      productIsPublished={false}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <PublishingStatus.MenuButton />
      <PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewSwitch />
        <PublishingStatus.MenuLinks>
          <hr />
          <PublishingStatus.SettingsLink />
          <PublishingStatus.ProductLink />
        </PublishingStatus.MenuLinks>
      </PublishingStatus.ErrorBoundary>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

## Other test cases

<Preview>
  <Story name="*DRAFT TEST: MenuButton">
    <PublishingStatus.MenuButton>
      Even more than Church Center
    </PublishingStatus.MenuButton>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Full">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <MenuItems>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch
            productName="SuperduperApp"
            positiveMessage="A good thing"
            negativeMessage="A not so good thing"
          />
          <hr />
          <MenuLinks>
            <PublishingStatus.SettingsLink />
            <PublishingStatus.ProductLink />
          </MenuLinks>
        </PublishingStatus.ErrorBoundary>
      </MenuItems>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Church Center not enabled--">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={false}
      productIsPublished={true}
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch
            productName="SuperduperApp"
            positiveMessage="A good thing"
            negativeMessage="A not so good thing"
          />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Full, not org admin">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={false}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: enabled, published, app-only">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={false}
      churchCenterWebIsActive={true}
      userIsOrgAdmin={false}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: enabled, published, app-only, org-admin">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={true}
      churchCenterAppIsActive={true}
      churchCenterWebIsActive={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Enabled but nothing published (org admin)">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={false}
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Enabled but nothing published">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={true}
      productIsPublished={false}
      userIsOrgAdmin={false}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: All systems fail (org admin)">
    <PublishingStatus.ViewController
      userIsOrgAdmin={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: All systems fail">
    <PublishingStatus.ViewController churchCenterProductURL="#" settingsURL="#">
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>

<Preview>
  <Story name="*DRAFT TEST: Church center not enabled with custom message">
    <PublishingStatus.ViewController
      churchCenterIsEnabled={false}
      productIsPublished={true}
      churchCenterProductURL="#"
      settingsURL="#"
    >
      <>
        <PublishingStatus.ErrorBoundary>
          <PublishingStatus.ViewSwitch />
        </PublishingStatus.ErrorBoundary>
        <PublishingStatus.ViewContext.Consumer>
          {({ view }) =>
            view === "Status" && (
              <>
                <PublishingStatus.SettingsLink />
                <PublishingStatus.ProductLink />
              </>
            )
          }
        </PublishingStatus.ViewContext.Consumer>
      </>
    </PublishingStatus.ViewController>
  </Story>
</Preview>
