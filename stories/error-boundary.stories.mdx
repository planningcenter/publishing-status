import { Meta, Story, Preview } from "@storybook/addon-docs/blocks";
import * as PublishingStatus from "../publishing-status";

<Meta title="Church Center/Publishing Status/ErrorBoundary" />

# ErrorBoundary

An error boundary component is included for app-side composition.

It behaves like any error boundary but comes bundled with standard error messaging.

<Preview>
  <Story name="default">
    <PublishingStatus.ErrorBoundary>
      <PublishingStatus.ViewSwitch />
    </PublishingStatus.ErrorBoundary>
  </Story>
</Preview>

## `fallback`

Use `fallback` to customize this messaging:

<Preview>
  <Story name="fallback">
    <PublishingStatus.ErrorBoundary
      fallback={
        <span>
          A <strong>custom</strong> error message
        </span>
      }
    >
      <PublishingStatus.ViewSwitch />
    </PublishingStatus.ErrorBoundary>
  </Story>
</Preview>

## Use your own

If you have an error boundary that is already integrated into an error reporting service,  
You can use `ErrorView` for messaging and your error boundary for handling

`ErrorView` provides a default message for apps an error boundary with error-reporting integration:

export const MyErrorBoundary = PublishingStatus.ErrorBoundary;

<Preview>
  <Story name="Use your own">
    <MyErrorBoundary
      fallback={
        <div>
          <h4 style={{ margin: "0 1rem" }}>My handler, shared message:</h4>
          <PublishingStatus.ErrorView />
        </div>
      }
    >
      <PublishingStatus.ViewSwitch />
    </MyErrorBoundary>
  </Story>
</Preview>
